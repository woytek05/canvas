<!DOCTYPE html>
<html lang="pl-PL">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Jakub Noga, Wiktor Wolanin, Wojciech Wysocki">
    <meta name="description" content="Strona opisująca HTML Canvas">
    <meta name="keywords" content="canvas, html, css, javascript">
    <link rel="shortcut icon" href="images/logo.ico" type="image/x-icon">
    <title>HTML Canvas</title>

    <!-- CSS -->
    <link rel="stylesheet" href="styles/index-style.css">

    <!-- Boxicons CSS -->
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>

    <!-- JS -->
    <script src="scripts/sidebar.js" defer></script>
    <script src="scripts/codeResult.js" defer></script>

    <!-- Highlight.js -->
    <link rel="stylesheet" href="highlight/styles/atom-one-dark.min.css">
    <script src="highlight/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</head>

<body>
    <nav class="sidebar close">
        <header>
            <div class="image-text">
                <span class="image">
                    <a href="index.html">
                        <img src="images/logo.png" alt="Logo">
                    </a>
                </span>
                <div class="text header-text">
                    <span class="name">
                        <a href="index.html">HTML Canvas</a>
                    </span>
                    <span class="description">
                        <a href="index.html">Poradnik</a>
                    </span>
                </div>
            </div>
            <i class="bx bx-chevron-right toggle"></i>
        </header>
        <div class="menu-bar">
            <div class="menu">
                <ul class="menu-links">
                    <li class="nav-link">
                        <a href="lines.html">
                            <i class="bx bx-right-arrow-alt icon"></i>
                            <span class="text nav-text">Linie</span>
                        </a>
                    </li>
                    <li class="nav-link">
                        <a href="curves.html">
                            <i class="bx bx-trending-up icon"></i>
                            <span class="text nav-text">Krzywe</span>
                        </a>
                    </li>
                    <li class="nav-link">
                        <a href="paths.html">
                            <i class="bx bx-redo icon"></i>
                            <span class="text nav-text">Ścieżki</span>
                        </a>
                    </li>
                    <li class="nav-link">
                        <a href="shapes.html">
                            <i class="bx bx-circle icon"></i>
                            <span class="text nav-text">Kształty</span>
                        </a>
                    </li>
                    <li class="nav-link">
                        <a href="filling.html">
                            <i class="bx bx-palette icon"></i>
                            <span class="text nav-text">Style wypełnienia</span>
                        </a>
                    </li>
                    <li class="nav-link">
                        <a href="images.html">
                            <i class="bx bx-image icon"></i>
                            <span class="text nav-text">Obrazy</span>
                        </a>
                    </li>
                    <li class="nav-link">
                        <a href="text.html">
                            <i class="bx bx-text icon"></i>
                            <span class="text nav-text">Tekst</span>
                        </a>
                    </li>
                    <li class="nav-link">
                        <a href="events.html">
                            <i class="bx bx-pointer icon"></i>
                            <span class="text nav-text">Zdarzenia</span>
                        </a>
                    </li>
                    <li class="nav-link">
                        <a href="animations.html">
                            <i class="bx bx-right-arrow icon"></i>
                            <span class="text nav-text">Animacje</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="main-container">
<!-- ------------------------ HEADER ------------------------ -->
        <h1>Obrazy</h1>
<!-- ------------------------ First element ------------------------ -->
        <details>
            <summary>
                <h3>Rysowanie Obrazu</h3>
            </summary>
            <p>
                Do narysowania obrazu, możemy użyć metody <span class="blue-code">drawImage</span><span class="grey-code">()</span>, 
                która wymaga obiektu obrazu i punktu docelowego. Punkt docelowy definiuje lewy górny róg obrazu w stosunku do lewego górnego rogu płótna.
            </p>
            <h4></h4>
            <div class="code-presentation">
                <div class="code-container">
                    <pre><code class="code html">&lt;canvas  id="myCanvas2" width="300" height="300"&gt;&lt;/canvas&gt;</code></pre>

                    <pre><code class="code javascript">
const canvas1 = document.getElementById('myCanvas1');
const ctx1 = canvas1.getContext('2d');
const imageObj = new Image();

imageObj.onload = function() {
    //Pozycjonowanie obiektu (zdjecie, oś x, oś y)
    ctx1.drawImage(imageObj, -50, 0);
};
imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';
                    </code></pre>
                </div>
                <div  class="code-result">
                    <canvas  id="myCanvas1" width="300" height="300"></canvas>
                    <script>
                        const canvas1 = document.getElementById('myCanvas1');
                        const ctx1 = canvas1.getContext('2d');
                        const imageObj = new Image();

                        imageObj.onload = function() {
                            //Pozycjonowanie obiektu (zdjecie, oś x, oś y)
                            ctx1.drawImage(imageObj, -50, 0);
                        };
                        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';
                    </script>

                </div>
            </div>
            <p>
                Ponieważ metoda <span class="blue-code">drawImage</span><span class="grey-code">()</span> wymaga obiektu obrazu, musimy najpierw utworzyć obraz 
                i poczekać na jego załadowanie przed utworzeniem instancji <span class="blue-code">drawImage</span><span class="grey-code">()</span>. 
                Możemy to osiągnąć za pomocą właściwości <span class="red-code">onload</span> obiektu image. <br>
                Dodatkowo możemy ustawić wysokość i szerokość zdjęcia ustawiając <span class="blue-code">width</span> i <span class="blue-code">height</span>
            </p>
        </details>
<!-- ------------------------ Second element ------------------------ -->
        <details>
            <summary>
                <h3>Przycinanie</h3>
            </summary>
            <p>
                Aby przyciąć obraz, możemy dodać sześć dodatkowych argumentów do metody <span class="blue-code">drawImage</span><span class="grey-code">()</span>: <br>
                <span class="red-code">sourceX</span>, <span class="red-code">sourceY</span>, <span class="red-code">sourceWidth</span>, <span class="red-code">sourceHeight</span>, <span class="red-code">destWidth</span> i <span class="red-code">destHeight</span>. <br>
                Argumenty te określają położenie i rozmiar prostokąta, który chcemy wyciąć z obrazu.
            </p>

            <div class="photo">
                <img src="images/img-cut.png" alt="wyciecie">
            </div>

            <h4></h4>
            <div class="code-presentation">
                <div class="code-container">
                    <pre><code class="code html">&lt;canvas  id="myCanvas2" width="300" height="300"&gt;&lt;/canvas&gt;</code></pre>

                    <pre><code class="code javascript">
const canvas2 = document.getElementById('myCanvas2');
const ctx2 = canvas2.getContext('2d');
const imageObj2 = new Image();

imageObj2.onload = function() {
    // draw cropped image
    const sourceX = 150;
    const sourceY = 0;
    const sourceWidth = 150;
    const sourceHeight = 150;
    const destWidth = sourceWidth;
    const destHeight = sourceHeight;
    const destX = canvas2.width / 2 - destWidth / 2;
    const destY = canvas2.height / 2 - destHeight / 2;

    ctx2.drawImage(imageObj2, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);
};
imageObj2.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';
                    </code></pre>
                </div>
                <div  class="code-result">
                    <canvas  id="myCanvas2" width="300" height="300"></canvas>
                    <script>
                        const canvas2 = document.getElementById('myCanvas2');
                        const ctx2 = canvas2.getContext('2d');
                        const imageObj2 = new Image();

                        imageObj2.onload = function() {
                            // draw cropped image
                            const sourceX = 150;
                            const sourceY = 0;
                            const sourceWidth = 150;
                            const sourceHeight = 150;
                            const destWidth = sourceWidth;
                            const destHeight = sourceHeight;
                            const destX = canvas2.width / 2 - destWidth / 2;
                            const destY = canvas2.height / 2 - destHeight / 2;

                            ctx2.drawImage(imageObj2, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);
                        };
                        imageObj2.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';
                    </script>

                </div>
            </div>
            
        </details>

<!-- ------------------------ Third element ------------------------ -->
        <details>           
            <summary>
                <h3>Dane Obrazu i inwersja kolorów</h3>
            </summary>
            <p>
                Aby uzyskać dane obrazu dla każdego piksela prostokątnego obszaru, 
                możemy pobrać obiekt danych obrazu za pomocą metody <span class="blue-code">getImageData</span><span class="grey-code">()</span>, 
                a następnie uzyskać dostęp do danych pikseli z właściwości data. 
                Każdy piksel w danych obrazu zawiera cztery składniki: czerwony, zielony, niebieski i alfa. <br>
                Otrzymane dane z obrazu <span class="red-code">odwracamy</span> i wyświetlamy w canvasie.
            </p>
            <div class="code-presentation">
                <div class="code-container">
                    <pre><code class="code html">
&lt;canvas  id="myCanvas2" width="300" height="300"&gt;&lt;/canvas&gt;
&lt;img style="display: none;"src="https://cdn.hashnode.com/res/hashnode/image/upload/v1600097347472/FaJTB7UrN.jpeg" id="evee"&gt;
                    </code></pre>

                    <pre><code class="code javascript">
const img3 = document.getElementById("eeveelutions");
const canvas = document.getElementById("myCanvas3");
const ctx3 = canvas.getContext("2d");

img3.onload = function () {
img3.crossOrigin = "anonymous";
ctx3.drawImage(img3, 0, 0);
const imgData = ctx3.getImageData(0, 0, canvas.width, canvas.height);
for (i = 0; i &lt; imgData.data.length; i += 4) {
    imgData.data[i] = 255 - imgData.data[i];
    imgData.data[i + 1] = 255 - imgData.data[i + 1];
    imgData.data[i + 2] = 255 - imgData.data[i + 2];
    imgData.data[i + 3] = 255;
}
ctx3.putImageData(imgData, 0, 0);
};
                    </code></pre>      
                </div>
                <div  class="code-result">
                    <canvas  id="myCanvas3" width="300" height="300"></canvas>
                    <img style="display: none;" src="https://cdn.hashnode.com/res/hashnode/image/upload/v1600018073360/uqh3T0Ts_.jpeg" id="eeveelutions" /> 
                    <script>                                                   
                        const img3 = document.getElementById("eeveelutions");
                        const canvas = document.getElementById("myCanvas3");
                        const ctx3 = canvas.getContext("2d");

                        img3.onload = function () {
                        img3.crossOrigin = "anonymous";
                        ctx3.drawImage(img3, 50, 50);
                        const imgData = ctx3.getImageData(0, 0, canvas.width, canvas.height);
                        for (i = 0; i < imgData.data.length; i += 4) {
                            imgData.data[i] = 255 - imgData.data[i];
                            imgData.data[i + 1] = 255 - imgData.data[i + 1];
                            imgData.data[i + 2] = 255 - imgData.data[i + 2];
                            imgData.data[i + 3] = 255;
                        }
                        ctx3.putImageData(imgData, 0, 0);
                        };
                    </script>

                </div>
            </div>
            <p>
                Istnieją trzy popularne techniki uzyskiwania dostępu do danych pikseli za pomocą obiektu danych obrazu: <br>
                - po wszystkich pikselach, zaczynając od lewego górnego rogu do prawego dolnego rogu regionu <br>
                - wybieranie danych pikseli na podstawie współrzędnych x, y <br>
                - po wszystkich pikselach, śledząc współrzędne x, y dla każdego piksela <br> <br>
            </p>

            <p>
                <span class="red-code">
                    Metoda getImageData() wymaga, 
                    aby obraz był przechowywany na serwerze WWW z tą samą domeną, 
                    co wykonujący go kod. Jeśli ten warunek nie zostanie spełniony, zostanie zgłoszony wyjątek SECURITY_ERR.
                </span>
            </p>
        </details>

<!-- ------------------------ Fourth element ------------------------ -->

        <details>
            <summary>
                <h3>Odcienie szarości</h3>
            </summary>
            <p>
                Ponownie używamy metody <span class="blue-code">getImageData</span><span class="grey-code">()</span>. <br>
                Ustawiamy wartości dla białego, szarego i czarnego, a następnie kolorujemy część zdjęcia na odpowiedni kolor i wkładamy do canvasa.
            </p>
            <div class="code-presentation">
                <div class="code-container">
                    <pre><code class="code html">
&lt;canvas  id="myCanvas2" width="300" height="300"&gt;&lt;/canvas&gt;
&lt;img style="display: none;"src="https://cdn.hashnode.com/res/hashnode/image/upload/v1600097347472/FaJTB7UrN.jpeg" id="evee"&gt;
                    </code></pre>

                    <pre><code class="code javascript">
const img = document.getElementById("evee");
const canvas4 = document.getElementById("myCanvas4");
const ctx4 = canvas4.getContext("2d");

img.onload = function () {
    img.crossOrigin = "anonymous";
    ctx4.drawImage(img, 50, 50);
    const imgData = ctx4.getImageData(0, 0, canvas.width, canvas.height);
    for (i = 0; i &lt; imgData.data.length; i += 4) {
        let count = imgData.data[i] + imgData.data[i + 1] + imgData.data[i + 2];
        let colour = 0;
        if (count > 510) colour = 255;
        else if (count > 255) colour = 127.5;

        imgData.data[i] = colour;
        imgData.data[i + 1] = colour;
        imgData.data[i + 2] = colour;
        imgData.data[i + 3] = 255;
    }
    ctx4.putImageData(imgData, 0, 0);
};
                    </code></pre>
                </div>
                <div  class="code-result">
                    <canvas  id="myCanvas4" width="300" height="300"></canvas>
                    <img style="display: none;"src="https://cdn.hashnode.com/res/hashnode/image/upload/v1600097347472/FaJTB7UrN.jpeg" id="evee" />
                    <script>

                        const img = document.getElementById("evee");
                        const canvas4 = document.getElementById("myCanvas4");
                        const ctx4 = canvas4.getContext("2d");

                        img.onload = function () {
                            img.crossOrigin = "anonymous";
                            ctx4.drawImage(img, 50, 50);
                            const imgData = ctx4.getImageData(0, 0, canvas.width, canvas.height);
                            for (i = 0; i < imgData.data.length; i += 4) {
                                let count = imgData.data[i] + imgData.data[i + 1] + imgData.data[i + 2];
                                let colour = 0;
                                if (count > 510) colour = 255;
                                else if (count > 255) colour = 127.5;

                                imgData.data[i] = colour;
                                imgData.data[i + 1] = colour;
                                imgData.data[i + 2] = colour;
                                imgData.data[i + 3] = 255;
                            }
                            ctx4.putImageData(imgData, 0, 0);
                        };
                    </script>
                </div>
            </div>
            
        </details>

        <!-- ------------------- Next Fucking element [5] (not dead, not sleepy, but fucking tired! its GOD DAMN 1am. I will be dead tomorrow) -->

        <details>
            <summary>
                <h3>Zapis rysunku do URL</h3>
            </summary>
            <p>
                Aby uzyskać adres <span class="red-code">URL</span> danych obrazu kanwy, możemy użyć metody <span class="blue-code">toDataURL</span><span class="grey-code">()</span> obiektu, 
                która konwertuje rysunek na 64-bitowy zakodowany adres URL PNG. <br> 
                Jeśli chcesz, aby adres URL danych obrazu był w formacie jpeg, możesz przekazać obraz/jpeg jako pierwszy argument w metodzie <span class="blue-code">toDataURL</span><span class="grey-code">()</span>. 
                Jeśli chcesz kontrolować jakość obrazu jpeg, możesz przekazać liczbę od <span class="red-code">0</span> do <span class="red-code">1</span> jako drugi argument do metody <span class="blue-code">toDataURL</span><span class="grey-code">()</span>.
            </p>
            <div class="code-presentation">
                <div class="code-container">
                    <pre><code class="code html">&lt;canvas  id="myCanvas2" width="300" height="300"&gt;&lt;/canvas&gt;</code></pre>

                    <pre><code class="code javascript">
const canvas5 = document.getElementById('myCanvas5');
const ctx5 = canvas5.getContext('2d');

// rysujemy dowolny obraz
const centerX = canvas5.width / 2;
const centerY = canvas5.height / 2;
const radius = 70;

ctx5.beginPath();
const grd5 = ctx5.createLinearGradient(0, 0, canvas5.width, canvas5.height);
grd5.addColorStop(0, '#00ffFF');   
grd5.addColorStop(1, 'darkblue');
ctx5.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
ctx5.fillStyle = grd5
ctx5.fill();
ctx5.lineWidth = 5;
ctx5.strokeStyle = '#blue'
ctx5.stroke();

// zapis obrazu (domyślnie PNG)
const dataURL = canvas5.toDataURL();

//umożliwiamy zapisanie rysunku jako zdjęcie
document.getElementById('canvaImg').src = dataURL;
                    </code></pre>
                </div>
                <div  class="code-result">
                    <canvas  id="myCanvas5" width="300" height="300"></canvas>
                    <img style='height: 120px; width: 120px;' id="canvaImg" alt="Click to save">
                    <script>
                        const canvas5 = document.getElementById('myCanvas5');
                        const ctx5 = canvas5.getContext('2d');

                        // rysujemy dowolny obraz
                        const centerX = canvas5.width / 2;
                        const centerY = canvas5.height / 2;
                        const radius = 70;

                        ctx5.beginPath();
                        const grd5 = ctx5.createLinearGradient(0, 0, canvas5.width, canvas5.height);
                        grd5.addColorStop(0, '#00ffFF');   
                        grd5.addColorStop(1, 'darkblue');
                        ctx5.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
                        ctx5.fillStyle = grd5
                        ctx5.fill();
                        ctx5.lineWidth = 5;
                        ctx5.strokeStyle = '#blue'
                        ctx5.stroke();

                        // zapis obrazu (domyślnie PNG)
                        const dataURL = canvas5.toDataURL();
                        
                        //umożliwiamy zapisanie rysunku jako zdjęcie
                        document.getElementById('canvaImg').src = dataURL;
                    </script>

                </div>
                
            </div>
            <p>
                Możemy dodać małe zdjęcie z boku które można zapisać prawym przyciskiem myszki
            </p>
        </details>

    </div>

    <script src="scripts/sidebar.js"></script>


</body>

</html>